<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Structure for Storing All Fits from Multiple NMF Runs. NMF 0.8</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <style>
      body {padding-top: 60px;}
      h2 {padding-top: 20px}
    </style>
    <link href="css/bootstrap-responsive.css" rel="stylesheet">
    <link href="css/highlight.css" rel="stylesheet">
    <link href="css/staticdocs.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class = "container">
          <a class="brand" href="index.html">NMF 0.8</a>
          <div class="nav">
            <ul class="nav">
              <li><a href="_MAN.html"><i class="icon-home icon-white"></i> Index</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container">
      <h1>Structure for Storing All Fits from Multiple NMF Runs</h1>

      <div class="row">
        <div class="span8">
                    
          <div class="Description">
            <h2>Description</h2>
            
            <p>This class is used to return the result from a multiple
  run of a single NMF algorithm performed with function
  <code>nmf</code> with option <code>keep.all=TRUE</code> (cf.
  <code><a href='nmf.html'>nmf</a></code>).</p>
        
          </div>

          <div class="Details">
            <h2>Details</h2>
            
            <p>It extends both classes <code><a href='NMFfitX-class.html'>NMFfitX-class</a></code> and
  <code>list</code>, and stores the result of each run (i.e. a
  <code>NMFfit</code> object) in its <code>list</code> structure.</p>
        
            <p>IMPORTANT NOTE: This class is designed to be
  <strong>read-only</strong>, even though all the
  <code>list</code>-methods can be used on its instances. Adding
  or removing elements would most probably lead to
  incorrect results in subsequent calls. Capability for
  concatenating and merging NMF results is for the moment
  only used internally, and should be included and
  supported in the next release of the package.</p>
        
          </div>

          <div class="Slots">
            <h2>Slots</h2>
            
            <p><span class='describe'></p>
        
            <p>.Data"standard slot that contains the S3
  <code>list</code> object data.  See R documentation on S4
  classes for more details.</p>
        
            <p></span></p>
        
          </div>

          <div class="Methods">
            <h2>Methods</h2>
            
            <p><span class='describe'></p>
        
            <p>algorithm<code>signature(object = "NMFfitXn")</code>:
  Returns the name of the common NMF algorithm used to
  compute all fits stored in <code>object</code></p>
        
            <p>Since all fits are computed with the same algorithm, this
  method returns the name of algorithm that computed the
  first fit. It returns <code>NULL</code> if the object is empty.</p>
        
            <p>basis<code>signature(object = "NMFfitXn")</code>:
  Returns the basis matrix of the best fit amongst all the
  fits stored in <code>object</code>. It is a shortcut for
  <code>basis(fit(object))</code>.</p>
        
            <p>coef<code>signature(object = "NMFfitXn")</code>:
  Returns the coefficient matrix of the best fit amongst
  all the fits stored in <code>object</code>. It is a shortcut
  for <code>coef(fit(object))</code>.</p>
        
            <p>compare<code>signature(object = "NMFfitXn")</code>:
  Compares the fits obtained by separate runs of NMF, in a
  single call to <code><a href='nmf.html'>nmf</a></code>.</p>
        
            <p>consensus<code>signature(object = "NMFfitXn")</code>:
  This method returns <code>NULL</code> on an empty object. The
  result is a matrix with several attributes attached, that
  are used by plotting functions such as
  <code><a href='heatmaps.html'>consensusmap</a></code> to annotate the plots.</p>
        
            <p>dim<code>signature( = "NMFfitXn")</code>: Returns the
  dimension common to all fits.</p>
        
            <p>Since all fits have the same dimensions, it returns the
  dimension of the first fit. This method returns
  <code>NULL</code> if the object is empty.</p>
        
            <p>entropy<code>signature(x = "NMFfitXn", y =
  "ANY")</code>: Computes the best or mean entropy across all NMF
  fits stored in <code>x</code>.</p>
        
            <p>fit<code>signature(object = "NMFfitXn")</code>: Returns
  the best NMF fit object amongst all the fits stored in
  <code>object</code>, i.e. the fit that achieves the lowest
  estimation residuals.</p>
        
            <p>.getRNG<code>signature(object = "NMFfitXn")</code>:
  Returns the RNG settings used for the best fit.</p>
        
            <p>This method throws an error if the object is empty.</p>
        
            <p>getRNG1<code>signature(object = "NMFfitXn")</code>:
  Returns the RNG settings used for the first run.</p>
        
            <p>This method throws an error if the object is empty.</p>
        
            <p>minfit<code>signature(object = "NMFfitXn")</code>:
  Returns the best NMF model in the list, i.e. the run that
  achieved the lower estimation residuals.</p>
        
            <p>The model is selected based on its <code>deviance</code> value.</p>
        
            <p>modelname<code>signature(object = "NMFfitXn")</code>:
  Returns the common type NMF model of all fits stored in
  <code>object</code></p>
        
            <p>Since all fits are from the same NMF model, this method
  returns the model type of the first fit. It returns
  <code>NULL</code> if the object is empty.</p>
        
            <p>nbasis<code>signature(x = "NMFfitXn")</code>: Returns
  the number of basis components common to all fits.</p>
        
            <p>Since all fits have been computed using the same rank, it
  returns the factorization rank of the first fit. This
  method returns <code>NULL</code> if the object is empty.</p>
        
            <p>nrun<code>signature(object = "NMFfitXn")</code>:
  Returns the number of runs performed to compute the fits
  stored in the list (i.e. the length of the list itself).</p>
        
            <p>purity<code>signature(x = "NMFfitXn", y =
  "ANY")</code>: Computes the best or mean purity across all NMF
  fits stored in <code>x</code>.</p>
        
            <p>runtime.all<code>signature(object = "NMFfitXn")</code>:
  If no time data is available from in slot
  &#145;runtime.all&#146; and argument <code>null=TRUE</code>, then
  the sequential time as computed by <code><a href='algorithmic.html'>seqtime</a></code>
  is returned, and a warning is thrown unless
  <code>warning=FALSE</code>.</p>
        
            <p>seeding<code>signature(object = "NMFfitXn")</code>:
  Returns the name of the common seeding method used the
  computation of all fits stored in <code>object</code></p>
        
            <p>Since all fits are seeded using the same method, this
  method returns the name of the seeding method used for
  the first fit. It returns <code>NULL</code> if the object is
  empty.</p>
        
            <p>seqtime<code>signature(object = "NMFfitXn")</code>:
  Returns the CPU time that would be required to
  sequentially compute all NMF fits stored in
  <code>object</code>.</p>
        
            <p>This method calls the function <code>runtime</code> on each fit
  and sum up the results. It returns <code>NULL</code> on an
  empty object.</p>
        
            <p>show<code>signature( = "NMFfitXn")</code>: Show method
  for objects of class <code>NMFfitXn</code></p>
        
            <p></span></p>
        
          </div>
      
          <h2 id="examples">Examples</h2>
          <pre class="examples"><div class='input'><span class="comment"># generate a synthetic dataset with known classes</span>
<span class="symbol">n</span> <span class="assignement">&lt;-</span> <span class="number">50</span><span class="keyword">;</span> <span class="symbol">counts</span> <span class="assignement">&lt;-</span> <span class="functioncall"><a href='NA'>c</a></span><span class="keyword">(</span><span class="number">5</span><span class="keyword">,</span> <span class="number">5</span><span class="keyword">,</span> <span class="number">8</span><span class="keyword">)</span><span class="keyword">;</span>
<span class="symbol">V</span> <span class="assignement">&lt;-</span> <span class="functioncall"><a href='syntheticNMF.html'>syntheticNMF</a></span><span class="keyword">(</span><span class="symbol">n</span><span class="keyword">,</span> <span class="symbol">counts</span><span class="keyword">)</span>

<span class="comment"># build the class factor</span>
<span class="symbol">groups</span> <span class="assignement">&lt;-</span> <span class="functioncall"><a href='NA'>as.factor</a></span><span class="keyword">(</span><span class="functioncall"><a href='NA'>do.call</a></span><span class="keyword">(</span><span class="string">'c'</span><span class="keyword">,</span> <span class="functioncall"><a href='NA'>lapply</a></span><span class="keyword">(</span><span class="functioncall"><a href='NA'>seq</a></span><span class="keyword">(</span><span class="number">3</span><span class="keyword">)</span><span class="keyword">,</span> <span class="keyword">function</span><span class="keyword">(</span><span class="formalargs">x</span><span class="keyword">)</span> <span class="functioncall"><a href='NA'>rep</a></span><span class="keyword">(</span><span class="symbol">x</span><span class="keyword">,</span> <span class="symbol">counts</span><span class="keyword">[</span><span class="symbol">x</span><span class="keyword">]</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">)</span>

<span class="comment"># perform multiple runs of one algorithm, keeping all the fits</span>
<span class="symbol">res</span> <span class="assignement">&lt;-</span> <span class="functioncall"><a href='nmf.html'>nmf</a></span><span class="keyword">(</span><span class="symbol">V</span><span class="keyword">,</span> <span class="number">3</span><span class="keyword">,</span> <span class="argument">nrun</span><span class="argument">=</span><span class="number">5</span><span class="keyword">,</span> <span class="argument">.options</span><span class="argument">=</span><span class="string">'k'</span><span class="keyword">)</span> <span class="comment"># .options=list(keep.all=TRUE) also works</span></div>
<strong class='warning'>Warning message:
error 'Interrupted system call' in select</strong>
<div class='input'><span class="symbol">res</span></div>
<div class='output'><Object of class: NMFfitXn >
  Method: brunet 
  Runs:  5 
  RNG:
   407, 9243, 638404768, 1844660257, -1365545106, 646893847, -233661844 
  Total timing:
   user  system elapsed 
  2.610   0.470   1.987 
  Sequential timing:
   user  system elapsed 
  1.200   0.020   1.324 
</div>
<div class='input'>
<span class="functioncall"><a href='assess.html'>summary</a></span><span class="keyword">(</span><span class="symbol">res</span><span class="keyword">)</span></div>
<div class='output'>            rank sparseness.basis  sparseness.coef        residuals            niter              cpu          cpu.all             nrun       cophenetic       dispersion 
       3.0000000        0.4210780        0.7219242      251.6773731      430.0000000        0.2300000        2.6100000        5.0000000        1.0000000        0.8380247 
</div>
<div class='input'><span class="comment"># get more info</span>
<span class="functioncall"><a href='assess.html'>summary</a></span><span class="keyword">(</span><span class="symbol">res</span><span class="keyword">,</span> <span class="argument">target</span><span class="argument">=</span><span class="symbol">V</span><span class="keyword">,</span> <span class="argument">class</span><span class="argument">=</span><span class="symbol">groups</span><span class="keyword">)</span></div>
<div class='output'>            rank sparseness.basis  sparseness.coef           purity          entropy              rss             evar        residuals            niter              cpu 
       3.0000000        0.4210780        0.7219242        1.0000000        0.0000000      308.9893519        0.7093112      251.6773731      430.0000000        0.2300000 
         cpu.all             nrun       cophenetic       dispersion 
       2.6100000        5.0000000        1.0000000        0.8380247 
</div>
<div class='input'>
<span class="comment"># compute/show computational times</span>
<span class="functioncall"><a href='algorithmic.html'>runtime.all</a></span><span class="keyword">(</span><span class="symbol">res</span><span class="keyword">)</span></div>
<div class='output'>   user  system elapsed 
  2.610   0.470   1.987 
</div>
<div class='input'><span class="functioncall"><a href='algorithmic.html'>seqtime</a></span><span class="keyword">(</span><span class="symbol">res</span><span class="keyword">)</span></div>
<div class='output'>   user  system elapsed 
  1.200   0.020   1.324 
</div>
<div class='input'>
# plot the consensus matrix, computed on the fly
## <strong>Not run</strong>:  consensusmap(res, annCol=groups) 
</div></pre>
        </div>
        <div class="span4">
          <!-- <ul>
            <li>NMFfitXn-class</li>
          </ul>
          <ul>
            
          </ul> -->
            
          <h2>See also</h2>
          
  Other multipleNMF: <code><a href='NMFfitX1-class.html'>NMFfitX1-class</a></code>,
  <code><a href='NMFfitX-class.html'>NMFfitX-class</a></code>

                    
        </div>
      </div>
      <footer class="footer">
        <p class="pull-right"><a href="#">Back to top</a></p>
        <p>Built by <a href="https://github.com/hadley/staticdocs">staticdocs</a>. Styled with <a href="http://twitter.github.com/bootstrap">bootstrap</a>.</p>
      </footer>
    </div> <!-- /container -->
  </body>
</html>